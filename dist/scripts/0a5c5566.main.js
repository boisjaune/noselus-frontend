!function(){var a={};"development"===AppConfig.env&&(a={LOG_TRANSITIONS:!0,LOG_VIEW_LOOKUPS:!0,LOG_ACTIVE_GENERATION:!0});window.Noselus=Ember.Application.create(a)}(),function(){!function(a,b,c){var d={PAGE:1,PER_PAGE:25};d.ControllerMixin=b.Mixin.create({loadingMore:!1,page:d.PAGE,perPage:d.PER_PAGE,actions:{getMore:function(){this.get("loadingMore")||(this.set("loadingMore",!0),this.get("target").send("getMore"))},gotMore:function(a,b){this.set("loadingMore",!1),this.pushObjects(a),this.set("page",b)}}}),d.RouteMixin=b.Mixin.create({actions:{getMore:function(){throw new Error("Must override Route action `getMore`.")},fetchPage:function(){throw new Error("Must override Route action `getMore`.")}}}),d.ViewMixin=b.Mixin.create({setupInfiniteScrollListener:function(){c(".inf-scroll-outer-container").on("scroll",c.proxy(this.didScroll,this))},teardownInfiniteScrollListener:function(){c(".inf-scroll-outer-container").off("scroll",c.proxy(this.didScroll,this))},didScroll:function(){(this.isScrolledToRight()||this.isScrolledToBottom())&&this.get("controller").send("getMore")},isScrolledToRight:function(){var a=c(".inf-scroll-inner-container").width()-c(".inf-scroll-outer-container").width(),b=c(".inf-scroll-outer-container").scrollLeft();return 0===b?!1:b-a},isScrolledToBottom:function(){var a=c(".inf-scroll-inner-container").height()-c(".inf-scroll-outer-container").height(),b=c(".inf-scroll-outer-container").scrollTop();return 0===b?!1:b>=a}}),a.InfiniteScroll=d}(this,Ember,jQuery)}(),function(){Noselus.HomepageController=Ember.ArrayController.extend({needs:["questions"],search:function(){var a=this,b=$(".search-field").val();a.get("controllers.questions").set("searchQuery",b),a.transitionToRoute("questions")}})}(),function(){Noselus.PoliticianController=Ember.ObjectController.extend({questions:[]}),Noselus.WidgetMiniProfileComponent=Ember.Component.extend({backgroundThumb:function(){return'background-image: url("'+this.get("model.thumb")+'")'}.property()})}(),function(){Noselus.PoliticiansController=Ember.ArrayController.extend({politicianFromWal:function(){var a=this.filter(function(a){return"WAL"===a.get("assembly")});return a}.property("@each.assembly"),politicianFromFed:function(){var a=this.filter(function(a){return"FED"===a.get("assembly")});return a}.property("@each.duration")})}(),function(){Ember.throttledObserver=function(a,b,c){return Em.observer(function(){Em.run.throttle(this,a,c)},b)},Noselus.QuestionsController=Ember.ArrayController.extend(InfiniteScroll.ControllerMixin,{perPage:20,page:1,searchQuery:null,searchQueryObserver:Ember.throttledObserver(function(){var a=this.get("searchQuery").split(" ").join("+");this.execQuery(a)},"searchQuery",600),execQuery:function(a){var b;""!==a&&(b=this.store.find("question",{q:a})),this.set("content",b)},activateSpinner:function(){$(".spinner").spin()}.observes("content.isLoaded")})}(),function(){Noselus.ApplicationAdapter=DS.RESTAdapter.extend({host:AppConfig.apiAdapterUrl})}(),function(){var a=DS.attr;Noselus.Politician=DS.Model.extend({fullName:a("string"),party:a("string"),address:a("string"),postalCode:a("string"),town:a("string"),phone:a("string"),fax:a("string"),email:a("string"),site:a("string"),assembly:a("string"),thumb:function(){return"https://noselus-test.herokuapp.com/politicians/picture/"+this.get("id")}.property(),thumbImage:function(){return'<img src="https://noselus-test.herokuapp.com/politicians/picture/'+this.get("id")+'" class="avatar media-object"/>'}.property()})}(),function(){var a=DS.attr;Noselus.Question=DS.Model.extend({title:a("string"),excerpt:a("string"),questionText:a("string"),answerText:a("string"),askedBy:a("number"),askedTo:a("number"),dateAsked:a("string"),askedByPolitician:function(){var a=this.store.find("politician",this.get("askedBy"));return a}.property(),askedToPolitician:function(){var a=this.store.find("politician",this.get("askedTo"));return a}.property(),questionHasAnswer:function(){return null!==this.get("answerText")?!0:!1}.property()}),Ember.Handlebars.registerBoundHelper("format-date",function(a){return moment(a,"YYYY-MM-DD").fromNow()}),moment.lang("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"une année",yy:"%d années"},ordinal:function(a){return a+(1===a?"er":"ème")},week:{dow:1,doy:4}})}(),function(){Noselus.PoliticianRoute=Ember.Route.extend({model:function(a){return this.store.find("politician",a.politician_id)},setupController:function(a,b){a.set("questions",this.store.find("question",{asked_by:b.id})),a.set("model",b)}})}(),function(){Noselus.PoliticiansRoute=Ember.Route.extend({model:function(){return this.store.find("politician")}})}(),function(){Noselus.QuestionRoute=Ember.Route.extend({model:function(a){return this.store.find("question",a.question_id)}})}(),function(){Noselus.QuestionsRoute=Ember.Route.extend({setupController:function(a){if(!a.get("searchQuery")){var b;b=this.store.find("question",{limit:5}),a.set("model",b)}},actions:{getMore:function(){var a,b=this.get("controller"),c=b.get("page")+1,d=b.get("perPage");a=this.send("fetchPage",c,d)},fetchPage:function(a,b){var c=this;this.store.find("question",{page:a,limit:b}).then(function(b){c.get("controller").send("gotMore",b.get("content"),a)})}}})}(),function(){Noselus.PoliticianView=Ember.View.extend({templateName:"politician",classNames:["container"],didInsertElement:function(){$("body").animate({scrollTop:0},"fast")}})}(),function(){Noselus.PoliticiansView=Ember.View.extend({templateName:"politicians",classNames:["container"],didInsertElement:function(){$(".spinner").spin()}})}(),function(){Noselus.QuestionListView=Ember.View.extend({templateName:"question_list",tagName:"div",classNames:["activityfeed--story"]})}(),function(){Noselus.QuestionView=Ember.View.extend({classNames:["container"],didInsertElement:function(){$("body").animate({scrollTop:0},"fast")}})}(),function(){Noselus.QuestionsView=Ember.View.extend(InfiniteScroll.ViewMixin,{templateName:"questions",classNames:["container"],didInsertElement:function(){var a=this;setTimeout(function(){a.setupInfiniteScrollListener()},1e3)},willDestroyElement:function(){var a=this;setTimeout(function(){a.teardownInfiniteScrollListener()},1e3)}})}(),function(){Noselus.Router.map(function(){this.route("homepage",{path:"/"}),this.resource("politicians"),this.resource("politician",{path:"/politicians/:politician_id"}),this.resource("questions"),this.resource("question",{path:"/questions/:question_id"})}),Noselus.Router.reopen({location:"hashbang"}),function(){var a=Ember.get,b=Ember.set;Ember.Location.registerImplementation("hashbang",Ember.HashLocation.extend({getURL:function(){return a(this,"location").hash.substr(2)},setURL:function(c){a(this,"location").hash="!"+c,b(this,"lastSetURL",c)},onUpdateURL:function(c){var d=this,e=Ember.guidFor(this);Ember.$(window).bind("hashchange.ember-location-"+e,function(){Ember.run(function(){var e=location.hash.substr(2);a(d,"lastSetURL")!==e&&(b(d,"lastSetURL",null),c(e))})})},formatURL:function(a){return"#!"+a}}))}()}();